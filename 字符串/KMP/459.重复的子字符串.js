/*
 * @lc app=leetcode.cn id=459 lang=javascript
 *
 * [459] é‡å¤çš„å­å­—ç¬¦ä¸²
 */

// @lc code=start
/**
 * @param {string} s
 * @return {boolean}
 */
var repeatedSubstringPattern = function (s) {
    // return `${s}${s}`.slice(1, 2 * s.length - 1).indexOf(s) == -1 ? false : true
    const next = new Array(s.length).fill(0);
  for (let i = 1, j = 0; i < s.length; i++) {
    // whildå¾ªç¯ï¼Œè¦ä¸æ–­çš„å‘ä¸Šå¯»æ‰¾ã€‚
    while (j > 0 && s[i] !== s[j]) {
      // å¦‚æœä¸åŒï¼Œæˆ‘ä»¬è¦ä»æœªåŒ¹é…å¥½çš„åœ°æ–¹å¼€å§‹ç»§ç»­åŒ¹é…ã€‚
      // æœªåŒ¹é…å¥½çš„ä½ç½®åœ¨é‚£é‡Œå‘¢ï¼ŸğŸ‘‡
      // æˆ‘ä»¬çŸ¥é“ next æ•°ç»„çš„å€¼å°±ä»£è¡¨æ¯ä¸€æ¬¡å­ä¸²åŒ¹é…å¥½çš„é•¿åº¦ï¼Œ
      // å› ä¸ºæ•°ç»„æ˜¯ä»0å¼€å§‹çš„ï¼Œæ‰€ä»¥è¯¥å€¼å°±æŒ‡å‘äº†æœªåŒ¹é…å¥½çš„ä½ç½®ã€‚
      // å½“j === 0æ—¶ï¼Œè¯´æ˜è¦ä»å¤´å¼€å§‹é‡æ–°åŒ¹é…äº†
      j = next[j - 1];
    }
    // å¦‚æœå½“å‰å­ä¸²å‰åç¼€ç›¸ç­‰ï¼Œå°±å°†æ›´æ–°å­ä¸²ï¼Œj++ i++
    if (s[i] === s[j]) j++;
    // å°†å½“å‰å­ä¸²çš„æœ€é•¿ç›¸ç­‰å‰åç¼€æ·»åŠ åˆ°nextæ•°ç»„ä¸­
    next[i] = j;
  }

  /**
        a   s   d   a   s   d   a   s   d
        0   0   0   1   2   3   4   5   6       nextæ•°ç»„

    æˆ‘ä»¬å¯ä»¥çœ‹å‡ºå¦‚æœsæ˜¯ç”±å­ä¸²é‡å¤æ„æˆçš„è¯ï¼Œä¼šä»ç¬¬äºŒä¸ªé‡å¤å­ä¸²å¼€å§‹æœ‰æœ€é•¿ç›¸ç­‰å‰åç¼€ï¼Œ
    å¹¶ä¸”len - 6 å°±æ˜¯ç¬¬ä¸€ä¸ªå­—ä¸²çš„é•¿åº¦ a s dï¼Œå› ä¸ºç¬¬ä¸€ä¸ªå­ä¸²éƒ½æ˜¯0
    å¦‚æœè¿™ä¸ªé•¿åº¦å¯ä»¥è¢«æ•´é™¤ï¼Œå°±è¯´æ˜æ•´ä¸ªå­—ç¬¦ä¸²å°±æ˜¯è¿™ä¸ªå‘¨æœŸçš„å¾ªç¯ã€‚
*/
  if (
    next[next.length - 1] !== 0 &&
    s.length % (s.length - next[next.length - 1]) === 0
  )
    return true;

  return false;
  
};
// @lc code=end
